<!DOCTYPE html>
<html lang="ko">
<head>
    <title>MoGL Showcase - calculator</title>
    <meta charset="utf-8"/>
    <meta property="og:title" content="Monkey"/>
    <meta property="og:description" content="MoGL.js version"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi"/>
    <style>
        body {
            background-color: #000;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
        }

        .FPS {
            color: #FFF;
            left: 0px;
            top: 0px;
            position: absolute
        }
    </style>
    <script src="../src/$.js"></script>
    <script src="../src/make.js"></script>
    <script src="../src/MoGL.js"></script>
    <script src="../src/BlendMode.js"></script>
    <script src="../src/Filter.js"></script>
    <script src="../src/Primitive.js"></script>
    <script src="../src/Vertex.js"></script>
    <script src="../src/Shading.js"></script>
    <script src="../src/VertexShaderFunctions.js"></script>
    <script src="../src/Shader.js"></script>
    <script src="../src/Matrix.js"></script>
    <script src="../src/Texture.js"></script>
    <script src="../src/Geometry.js"></script>
    <script src="../src/Material.js"></script>
    <script src="../src/Mesh.js"></script>
    <script src="../src/Group.js"></script>
    <script src="../src/Camera.js"></script>
    <script src="../src/Scene.js"></script>
    <script src="../src/World.js"></script>
    <script src="../showcase/dat.gui.min.js"></script>
</head>
<body>
<img src="calulator/iphone.png" id="iphone" style="position: absolute;top:0px; display:none">
<img src="calulator/text.png" id="text" style="position: absolute;top:0px; display:none">
<img src="calulator/cal0.png" id="cal0" style="position: absolute;top:0px; display:none">
<img src="calulator/cal1.png" id="cal1" style="position: absolute;top:0px; display:none">
<img src="calulator/cal2.png" id="cal2" style="position: absolute;top:0px; display:none">
<img src="calulator/cal3.png" id="cal3" style="position: absolute;top:0px; display:none">
<img src="calulator/cal4.png" id="cal4" style="position: absolute;top:0px; display:none">
<img src="calulator/num0.png" id="num0" style="position: absolute;top:0px; display:none">
<img src="calulator/num1.png" id="num1" style="position: absolute;top:0px; display:none">
<img src="calulator/num2.png" id="num2" style="position: absolute;top:0px; display:none">
<img src="calulator/num3.png" id="num3" style="position: absolute;top:0px; display:none">
<img src="calulator/num4.png" id="num4" style="position: absolute;top:0px; display:none">
<img src="calulator/num5.png" id="num5" style="position: absolute;top:0px; display:none">
<img src="calulator/num6.png" id="num6" style="position: absolute;top:0px; display:none">
<img src="calulator/num7.png" id="num7" style="position: absolute;top:0px; display:none">
<img src="calulator/num8.png" id="num8" style="position: absolute;top:0px; display:none">
<img src="calulator/num9.png" id="num9" style="position: absolute;top:0px; display:none">

<canvas id="canvas"></canvas>
<script>
    'use strict';
    // basic settings
    var world, scene, camera;
    world = new World('canvas')
    scene = new Scene()
    camera = new Camera()
    world.addScene(scene)
    scene.addChild(camera)
    world.setAutoSize(1)
    world.start()

    var cals = [], numbers = [];
    var introText;

    function setBg() {
        var mesh, geo, mat, texture;
        mat = new Material()
        texture = new Texture()
        geo = Primitive.plane()
        texture.img = document.getElementById('iphone')
        mat.addTexture(Texture.diffuse, texture)
        mesh = new Mesh(geo, mat)
        mesh.scale = [4.29, 1, 8.85]
        mesh.rotateX = Math.PI / 2
        scene.addChild(mesh)

    }
    function setintroText() {
        var mesh, geo, mat, texture;
        mat = new Material()
        texture = new Texture()
        geo = Primitive.plane()
        texture.img = document.getElementById('text')
        mat.addTexture(Texture.diffuse, texture)
        mesh = new Mesh(geo, mat)
        mesh.scale = [5.51 / 2, 1, 1.29 / 2]
        mesh.rotateX = Math.PI / 2
        mesh.y = 2.25
        scene.addChild(mesh)
    }
    function HD_calDown(){
        this.setProperties({scaleX: 0.4, scaleZ: 0.4}, {
            time: 0.1,
            ease: MoGL.ease.sineOut
        });
    }
    function HD_calUp(){
        this.setProperties({scaleX: 0.5, scaleZ: 0.5}, {
            time: 0.1,
            ease: MoGL.ease.sineOut
        });
    }
    function HD_numberDown(){
        this.setProperties({scaleX: 0.5, scaleZ: 0.5}, {
            time: 0.1,
            ease: MoGL.ease.sineOut
        });
    }
    function HD_numberUp(){
        this.setProperties({scaleX: 0.7, scaleZ: 0.7}, {
            time: 0.1,
            ease: MoGL.ease.sineOut
        });
    }
    function setCal() {
        var mesh, geo, mat, texture;
        var i, max = 5
        mat = new Material(1, 1, 1, 0.1)
        geo = Primitive.plane()
        mesh = new Mesh(geo, mat)
        mesh.scale = [0, 1, 0]
        mesh.rotateX = Math.PI / 2
        mesh.y = -2.6
        scene.addChild(mesh)
        mesh.setProperties({scaleX: 3.8, scaleZ: 0.65}, {
            time: 0.5,
            ease: MoGL.ease.sineOut
        });

        for (i = 0; i < max; i++) {
            mat = new Material()
            texture = new Texture()
            geo = Primitive.plane()
            texture.img = document.getElementById('cal' + i)
            mat.addTexture(Texture.diffuse, texture)
            mesh = new Mesh(geo, mat)
            mesh.scale = [0.0, 0.5, 0.0]
            mesh.rotateX = Math.PI / 2
            mesh.y = -2.6
            mesh.x = i * 0.6 - 0.25 * max
            scene.addChild(mesh)
            cals.push(mesh)
            mesh.setProperties({scaleX: 0.5, scaleZ: 0.5}, {
                delay:0.5+0.05*i,
                time: 0.3,
                ease: MoGL.ease.sineOut
            });
            mesh.addEventListener(Mesh.down, HD_calDown)
            mesh.addEventListener(Mesh.up, HD_calUp)
            mesh.addEventListener(Mesh.out, HD_calUp)
        }
    }
    function setNumbers(){
        var mesh, geo, mat, texture;
        var i, max = 10
        for (i = 0; i < max; i++) {
            mat = new Material()
            texture = new Texture()
            geo = Primitive.plane()
            texture.img = document.getElementById('num' + i)
            mat.addTexture(Texture.diffuse, texture)
            mesh = new Mesh(geo, mat)
            mesh.scale = [0.0, 0.5, 0.0]
            mesh.rotateX = Math.PI / 2
            mesh.y = -2.6
            mesh.x = i * 0.6 - 0.25 * max
            scene.addChild(mesh)
            numbers.push(mesh)
            mesh.addEventListener(Mesh.down, HD_numberDown)
            mesh.addEventListener(Mesh.up, HD_numberUp)
            mesh.addEventListener(Mesh.out, HD_numberUp)
        }
        for (i = 0; i < max-1; i++) {
            mesh = numbers[i+1]
            mesh.x = i % 3 * 1 - 1
            mesh.y = -Math.floor(i / 3) * 1 + 1
            mesh.setProperties({scaleX: 0.7, scaleZ: 0.7}, {
                delay:0.5+0.05*i,
                time: 0.3,
                ease: MoGL.ease.sineOut
            });
        }
    }
    setBg()
    setintroText()
    setCal()
    setNumbers()
</script>
</body>
</html>
